apiVersion: v1
kind: Service
metadata:
  name: astor-service
spec:
  # ClusterIP is the right type when ingress-nginx sits in front.
  # Do not use LoadBalancer here â€” that bypasses the ingress layer.
  type: ClusterIP
  selector:
    app: astor-app
  ports:
    - name: http
      port: 80
      targetPort: http   # resolves to containerPort named "http" (3000)
      protocol: TCP
